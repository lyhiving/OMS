{"version":3,"sources":["webpack:///./src/api/liveData.js","webpack:///./src/views/dashboard/Distribution.vue?8940","webpack:///./src/views/dashboard/admin/Distribution.vue?5122","webpack:///src/views/dashboard/admin/Distribution.vue","webpack:///./src/views/dashboard/admin/Distribution.vue?22f5","webpack:///./src/views/dashboard/admin/Distribution.vue","webpack:///src/views/dashboard/Distribution.vue","webpack:///./src/views/dashboard/Distribution.vue?8205","webpack:///./src/views/dashboard/Distribution.vue","webpack:///./src/views/dashboard/admin/Distribution.vue?8da1"],"names":["fetchGlobalData","Object","_utils_request__WEBPACK_IMPORTED_MODULE_3__","url","method","fetchLiveData","type","render","_vm","this","_h","$createElement","_c","_self","currentRole","tag","staticRenderFns","Distributionvue_type_template_id_39e13c76_scoped_true_render","staticClass","attrs","gutter","xs","sm","lg","slot","_v","chart-data","versionData","tagData","deviceData","liveData","topSiteData","netTypeData","Distributionvue_type_template_id_39e13c76_scoped_true_staticRenderFns","Distributionvue_type_script_lang_js_","name","components","Piechart","PieChart","data","onlineNum","mounted","getData","methods","_this","then","res","num_rt","userDomain","total","forEach","item","num","push","host","value","catch","err","console","log","format","admin_Distributionvue_type_script_lang_js_","component","componentNormalizer","options","__file","Distribution","dashboard_Distributionvue_type_script_lang_js_","adminDistribution","userDistribution","user_Distribution","computed","objectSpread","vuex_esm","created","roles","includes","views_dashboard_Distributionvue_type_script_lang_js_","Distribution_component","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Distribution_vue_vue_type_style_index_0_id_39e13c76_rel_stylesheet_2Fscss_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Distribution_vue_vue_type_style_index_0_id_39e13c76_rel_stylesheet_2Fscss_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-81c0.1aafd5c7.js","sourcesContent":["import request from '@/utils/request'\n\n// 全局数据接口\nexport function fetchGlobalData() {\n  return request({\n    url: 'global',\n    method: 'get',\n  })\n}\n\nexport function fetchLiveData(type) {\n  return request({\n    url: `global/num?type=${type}`,\n    method: 'get'\n  })\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c(_vm.currentRole,{tag:\"component\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dashboard-editor-container\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{staticClass:\"chart-col\",attrs:{\"xs\":24,\"sm\":12,\"lg\":8}},[_c('el-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"版本分布\")])]),_c('Piechart',{attrs:{\"chart-data\":this.versionData}})],1)],1),_c('el-col',{staticClass:\"chart-col\",attrs:{\"xs\":24,\"sm\":12,\"lg\":8}},[_c('el-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"Tag分布\")])]),_c('Piechart',{attrs:{\"chart-data\":_vm.tagData}})],1)],1),_c('el-col',{staticClass:\"chart-col\",attrs:{\"xs\":24,\"sm\":12,\"lg\":8}},[_c('el-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"终端分布\")])]),_c('Piechart',{attrs:{\"chart-data\":_vm.deviceData}})],1)],1),_c('el-col',{staticClass:\"chart-col\",attrs:{\"xs\":24,\"sm\":12,\"lg\":8}},[_c('el-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"直播点播分布\")])]),_c('Piechart',{attrs:{\"chart-data\":_vm.liveData}})],1)],1),_c('el-col',{staticClass:\"chart-col\",attrs:{\"xs\":24,\"sm\":12,\"lg\":8}},[_c('el-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"头部域名分布\")])]),_c('Piechart',{attrs:{\"chart-data\":_vm.topSiteData}})],1)],1),_c('el-col',{staticClass:\"chart-col\",attrs:{\"xs\":24,\"sm\":12,\"lg\":8}},[_c('el-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"网络类型分布\")])]),_c('Piechart',{attrs:{\"chart-data\":_vm.netTypeData}})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"dashboard-editor-container\">\n    <el-row :gutter=\"20\">\n      <el-col :xs=\"24\" :sm=\"12\" :lg=\"8\" class=\"chart-col\">\n        <el-card>\n          <div slot=\"header\">\n            <span>版本分布</span>\n          </div>\n          <Piechart :chart-data=\"this.versionData\" />\n        </el-card>\n      </el-col>\n\n      <el-col :xs=\"24\" :sm=\"12\" :lg=\"8\" class=\"chart-col\">\n        <el-card>\n          <div slot=\"header\">\n            <span>Tag分布</span>\n          </div>\n          <Piechart :chart-data=\"tagData\" />\n        </el-card>\n      </el-col>\n\n      <el-col :xs=\"24\" :sm=\"12\" :lg=\"8\" class=\"chart-col\">\n        <el-card>\n          <div slot=\"header\">\n            <span>终端分布</span>\n          </div>\n          <Piechart :chart-data=\"deviceData\" />\n        </el-card>\n      </el-col>\n\n      <el-col :xs=\"24\" :sm=\"12\" :lg=\"8\" class=\"chart-col\">\n        <el-card>\n          <div slot=\"header\">\n            <span>直播点播分布</span>\n          </div>\n          <Piechart :chart-data=\"liveData\" />\n        </el-card>\n      </el-col>\n\n      <el-col :xs=\"24\" :sm=\"12\" :lg=\"8\" class=\"chart-col\">\n        <el-card>\n          <div slot=\"header\">\n            <span>头部域名分布</span>\n          </div>\n          <Piechart :chart-data=\"topSiteData\" />\n        </el-card>\n      </el-col>\n\n      <el-col :xs=\"24\" :sm=\"12\" :lg=\"8\" class=\"chart-col\">\n        <el-card>\n          <div slot=\"header\">\n            <span>网络类型分布</span>\n          </div>\n          <Piechart :chart-data=\"netTypeData\" />\n        </el-card>\n      </el-col>\n\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport Piechart from '@/components/PieChart'\nimport { fetchGlobalData } from '@/api/liveData'\nimport { fetchLiveData } from '@/api/liveData'\nimport { fetchDomain } from '@/api/userDomain'\nimport { formatPieData } from '@/utils/format'\n\nexport default {\n  name: 'Distribution',\n  components: {\n    Piechart\n  },\n  data() {\n    return {\n      versionData: [],\n      tagData: [],\n      deviceData: [],\n      liveData: [],\n      topSiteData: [],\n      netTypeData: [],\n      onlineNum: 0\n    }\n  },\n  mounted() {\n    this.getData()\n  },\n  methods: {\n    getData() {\n      fetchGlobalData().then(res => {\n        if(res.data) {\n          this.onlineNum = res.data.num_rt\n          fetchDomain(1, 10, 'num', [])\n            .then(res => {\n              if(res.data) {\n                  let total = 0\n                  res.data.forEach(item => {\n                      total += item.num\n                      this.topSiteData.push({\n                          name: item.host,\n                          value: item.num\n                      })\n                  })\n                  this.topSiteData.push({\n                      name: '其他',\n                      value: this.onlineNum - total\n                  })\n              }\n            })\n            .catch(err => {\n              console.log(err)\n            })\n        }\n      })\n      fetchLiveData('version').then(res => {\n        if(res.data) {\n          this.versionData = formatPieData(res.data)\n        }\n      })\n      fetchLiveData('tag').then(res => {\n        if(res.data) {\n          this.tagData = formatPieData(res.data)\n        }\n      })\n      fetchLiveData('device').then(res => {\n        if(res.data) {\n          this.deviceData = formatPieData(res.data)\n        }\n      })\n      fetchLiveData('live').then(res => {\n        if(res.data) {\n          this.liveData = formatPieData(res.data)\n        }\n      })\n      fetchLiveData('netType').then(res => {\n        if(res.data) {\n          this.netTypeData = formatPieData(res.data)\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n.chart-col {\n  margin-bottom: 20px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Distribution.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Distribution.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Distribution.vue?vue&type=template&id=39e13c76&scoped=true&\"\nimport script from \"./Distribution.vue?vue&type=script&lang=js&\"\nexport * from \"./Distribution.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Distribution.vue?vue&type=style&index=0&id=39e13c76&rel=stylesheet%2Fscss&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39e13c76\",\n  null\n  \n)\n\ncomponent.options.__file = \"Distribution.vue\"\nexport default component.exports","<template>\n  <div>\n    <component :is=\"currentRole\"/>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport adminDistribution from './admin/Distribution'\nimport userDistribution from './user/Distribution'\n\nexport default {\n  name: 'Distribution',\n  components: { adminDistribution, userDistribution },\n  data() {\n    return {\n      currentRole: 'adminDistribution'\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'roles'\n    ])\n  },\n  created() {\n    if (!this.roles.includes('admin')) {\n      this.currentRole = 'userDistribution'\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Distribution.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Distribution.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Distribution.vue?vue&type=template&id=6ab9e6b8&\"\nimport script from \"./Distribution.vue?vue&type=script&lang=js&\"\nexport * from \"./Distribution.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Distribution.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Distribution.vue?vue&type=style&index=0&id=39e13c76&rel=stylesheet%2Fscss&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Distribution.vue?vue&type=style&index=0&id=39e13c76&rel=stylesheet%2Fscss&lang=scss&scoped=true&\""],"sourceRoot":""}