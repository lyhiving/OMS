(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6cd5"],{"19f1":function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"b",function(){return o});a("cadf"),a("551c"),a("097d");var n=a("b775");function i(t,e,a,i){return Object(n["a"])({url:"user/user_id/".concat(t,"/domain/domain_id/").concat(e,"/num?start_ts=").concat(a,"&end_ts=").concat(i,"&gran=5"),method:"get"})}function o(t,e,a,i,o){return o||(o=5),Object(n["a"])({url:"user/user_id/".concat(t,"/domain/domain_id/").concat(e,"/p2p?start_ts=").concat(a,"&end_ts=").concat(i,"&gran=").concat(o),method:"get"})}},2940:function(t,e,a){"use strict";a.d(e,"b",function(){return i}),a.d(e,"c",function(){return o}),a.d(e,"a",function(){return r});a("cadf"),a("551c"),a("097d");var n=a("b775");function i(t,e){return Object(n["a"])({url:"global/num?start_ts=".concat(t,"&end_ts=").concat(e,"&gran=5"),method:"get"})}function o(t,e){return Object(n["a"])({url:"global/p2p?start_ts=".concat(t,"&end_ts=").concat(e,"&gran=1440"),method:"get"})}function r(t,e){return Object(n["a"])({url:"global/http?start_ts=".concat(t,"&end_ts=").concat(e,"&gran=1440"),method:"get"})}},"44e8":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(t.currentRole,{tag:"component"})},i=[],o=(a("6762"),a("2fdb"),a("c93e")),r=(a("cadf"),a("551c"),a("097d"),a("2f62")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{xs:10,sm:6,lg:4}},[a("el-radio-group",{on:{change:t.selectChange},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio-button",{attrs:{label:"hour"}},[t._v(t._s(t.$t("historyData.hour")))]),a("el-radio-button",{attrs:{label:"day"}},[t._v(t._s(t.$t("historyData.day")))]),a("el-radio-button",{attrs:{label:"week"}},[t._v(t._s(t.$t("historyData.week")))]),a("el-radio-button",{attrs:{label:"month"}},[t._v(t._s(t.$t("historyData.month")))])],1)],1),a("el-form-item",{attrs:{xs:10,sm:6,lg:4}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.dataChange},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1),a("LineChart",{attrs:{"chart-data":t.onlineData,option:t.option}})],1)},c=[],l=(a("ac6a"),a("c1df")),u=a.n(l),h=a("2940"),d=a("e702"),m={name:"Online",components:{LineChart:d["a"]},data:function(){return{date:[u()().subtract(1,"hour"),u()()],radio:"hour",onlineData:{online:[]},option:{xData:[],yName:"在线人数"}}},mounted:function(){this.getData()},methods:{dataChange:function(t){this.getData(this.getTimeStamp(t[0]),this.getTimeStamp(t[1]))},selectChange:function(t){switch(t){case"hour":this.getData(this.getTimeStamp(u()().subtract(1,"hour")),this.getTimeStamp(u()()));break;case"day":this.getData(this.getTimeStamp(u()().subtract(1,"day")),this.getTimeStamp(u()()));break;case"week":this.getData(this.getTimeStamp(u()().subtract(1,"week")),this.getTimeStamp(u()()));break;case"month":this.getData(this.getTimeStamp(u()().subtract(1,"month")),this.getTimeStamp(u()()));break;default:break}},formatData:function(t){var e=this,a=t.data.list;this.option.xData=[],this.onlineData.online=[],a.forEach(function(t){e.option.xData.push(u()(1e3*t.ts).format("MM-DD HH:mm")),e.onlineData.online.push(t.value)})},getTimeStamp:function(t){return u()(t).format("X")},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getTimeStamp(this.date[0]),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTimeStamp(this.date[1]);Object(h["b"])(e,a).then(function(e){t.formatData(e)})}}},p=m,f=a("2877"),b=Object(f["a"])(p,s,c,!1,null,null,null);b.options.__file="Online.vue";var g=b.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{xs:10,sm:6,lg:4}},[a("el-radio-group",{on:{change:t.selectChange},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio-button",{attrs:{label:"hour"}},[t._v(t._s(t.$t("historyData.hour")))]),a("el-radio-button",{attrs:{label:"day"}},[t._v(t._s(t.$t("historyData.day")))]),a("el-radio-button",{attrs:{label:"week"}},[t._v(t._s(t.$t("historyData.week")))]),a("el-radio-button",{attrs:{label:"month"}},[t._v(t._s(t.$t("historyData.month")))])],1)],1),a("el-form-item",{attrs:{xs:10,sm:6,lg:4}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.dataChange},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1),a("LineChart",{attrs:{"chart-data":t.onlineData,option:t.option}}),a("NoBindTip")],1)},_=[],D=a("19f1"),y=a("9a09"),O={name:"Online",components:{LineChart:d["a"],NoBindTip:y["a"]},data:function(){return{date:[u()().subtract(1,"hour"),u()()],radio:"hour",onlineData:{online:[]},option:{xData:[],yName:"在线人数"}}},computed:Object(o["a"])({},Object(r["b"])(["currentDomain"])),mounted:function(){this.currentDomain.id&&this.getData()},methods:{dataChange:function(t){this.getData(this.getTimeStamp(t[0]),this.getTimeStamp(t[1]))},selectChange:function(t){switch(t){case"hour":this.getData(this.getTimeStamp(u()().subtract(1,"hour")),this.getTimeStamp(u()()));break;case"day":this.getData(this.getTimeStamp(u()().subtract(1,"day")),this.getTimeStamp(u()()));break;case"week":this.getData(this.getTimeStamp(u()().subtract(1,"week")),this.getTimeStamp(u()()));break;case"month":this.getData(this.getTimeStamp(u()().subtract(1,"month")),this.getTimeStamp(u()()));break;default:break}},formatData:function(t){var e=this,a=t.data.list;this.option.xData=[],this.onlineData.online=[],a.forEach(function(t){e.option.xData.push(u()(1e3*t.ts).format("MM-DD HH:mm")),e.onlineData.online.push(t.value)})},getTimeStamp:function(t){return u()(t).format("X")},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getTimeStamp(this.date[0]),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTimeStamp(this.date[1]);Object(D["a"])(this.currentDomain.uid,this.currentDomain.id,e,a).then(function(e){t.formatData(e)})}}},x=O,k=Object(f["a"])(x,v,_,!1,null,null,null);k.options.__file="Online.vue";var S=k.exports,T={name:"Online",components:{adminOnline:g,userOnline:S},data:function(){return{currentRole:"adminOnline"}},computed:Object(o["a"])({},Object(r["b"])(["roles"])),created:function(){this.roles.includes("admin")||(this.currentRole="userOnline")}},w=T,j=Object(f["a"])(w,n,i,!1,null,null,null);j.options.__file="OnlineNum.vue";e["default"]=j.exports},"456d":function(t,e,a){var n=a("4bf8"),i=a("0d58");a("5eda")("keys",function(){return function(t){return i(n(t))}})},"5eda":function(t,e,a){var n=a("5ca1"),i=a("8378"),o=a("79e5");t.exports=function(t,e){var a=(i.Object||{})[t]||Object[t],r={};r[t]=e(a),n(n.S+n.F*o(function(){a(1)}),"Object",r)}},"9a09":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.tipVisible,width:"mobile"===t.device?"80%":"30%"},on:{"update:visible":function(e){t.tipVisible=e}}},[a("span",[t._v(t._s(t.$t("dashboard.tip")))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.tipVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleGoApp}},[t._v(t._s(t.$t("dashboard.goApp")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.handlePush}},[t._v(t._s(t.$t("dashboard.goBind")))])],1)])},i=[],o=a("c93e"),r=(a("cadf"),a("551c"),a("097d"),a("2f62")),s={name:"NoBindTip",data:function(){return{tipVisible:!1}},watch:{currentDomain:function(t){void 0!==t.id&&(this.tipVisible=!1)}},mounted:function(){var t=this;setTimeout(function(){t.roles.indexOf("user")>-1&&void 0===t.currentDomain.id&&(t.tipVisible=!0)},1e3)},computed:Object(o["a"])({},Object(r["b"])(["device","currentDomain","roles"])),methods:{handlePush:function(){this.tipVisible=!1,this.$router.push("/user/domain")},handleGoApp:function(){this.tipVisible=!1,this.$router.push("/app/app")}}},c=s,l=a("2877"),u=Object(l["a"])(c,n,i,!1,null,null,null);u.options.__file="index.vue";e["a"]=u.exports},e702:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},i=[],o=(a("28a5"),a("456d"),a("ac6a"),a("ed08")),r=a("3eba");a("817d");var s={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0},option:{type:Object,required:!0}},data:function(){return{chart:null,optionData:{xData:[],unit:""},data:{}}},watch:{chartData:{deep:!0,handler:function(t){this.data=t,this.setOptions()}},option:{deep:!0,handler:function(t){this.optionData=t,this.setOptions()}}},mounted:function(){var t=this;this.initChart(),this.autoResize&&(this.__resizeHandler=Object(o["b"])(function(){t.chart&&t.chart.resize()},100),window.addEventListener("resize",this.__resizeHandler));var e=document.getElementsByClassName("sidebar-container")[0];e.addEventListener("transitionend",this.sidebarResizeHandler)},beforeDestroy:function(){if(this.chart){this.autoResize&&window.removeEventListener("resize",this.__resizeHandler);var t=document.getElementsByClassName("sidebar-container")[0];t.removeEventListener("transitionend",this.sidebarResizeHandler),this.chart.dispose(),this.chart=null}},methods:{sidebarResizeHandler:function(t){"width"===t.propertyName&&this.__resizeHandler()},setOptions:function(){var t=this,e=[],a=[],n=["#3888fa","#FF005A"];Object.keys(this.data).forEach(function(i,o){a.push(i),e.push({name:i,markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},itemStyle:{normal:{color:n[o],lineStyle:{color:n[o],width:2}}},smooth:!0,type:"line",data:t.data[i],animationDuration:2800,animationEasing:"cubicInOut"})}),this.chart.setOption({xAxis:{data:this.optionData.xData,boundaryGap:!1,axisLabel:{formatter:function(t){if(t)return t.split(" ").join("\n")}},axisTick:{show:!1}},grid:{left:10,right:30,bottom:20,top:30,containLabel:!0},tooltip:{trigger:"axis",padding:[5,10],axisPointer:{type:"cross"},textStyle:{align:"left"}},yAxis:{name:this.optionData.unit?"".concat(this.optionData.yName,"(").concat(this.optionData.unit,")"):"".concat(this.optionData.yName),axisTick:{show:!1}},legend:{data:a},series:e})},initChart:function(){this.chart=r.init(this.$el,"macarons"),this.setOptions(this.chartData)}}},c=s,l=a("2877"),u=Object(l["a"])(c,n,i,!1,null,null,null);u.options.__file="index.vue";e["a"]=u.exports}}]);
//# sourceMappingURL=chunk-6cd5.91ef429b.js.map